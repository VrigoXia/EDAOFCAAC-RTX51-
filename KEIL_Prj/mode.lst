C51 COMPILER V8.05a   MODE                                                                 07/18/2017 16:00:21 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE MODE
OBJECT MODULE PLACED IN .\mode.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE ..\SOFTWARE\TASK\mode.c LARGE BROWSE DEBUG OBJECTEXTEND PRINT(.\mode.lst
                    -) TABS(2) OBJECT(.\mode.obj)

line level    source

   1          #include "mode.h"
   2          #include "../ALGORITHM/PID/PID.h"
   3          #include "../../HARDWARE/DEVICES/MOTOR/DC_MOTOR/MOTOR.h"
   4          #include "../../HARDWARE/BSP/timer.h"
   5          #include "../../HARDWARE/BSP/USART1.h"
   6          void mode1(void)
   7          {
   8   1                static bit step1=0;//模式一步骤1标志位
   9   1                static bit step2=0; //步骤2 标志位
  10   1                static bit step3=0;  //步骤三标志位
  11   1      
  12   1                if(step1)//步骤一已经完成
  13   1                  {
  14   2      
  15   2                    if(step2) //如果步骤2已完成
  16   2                      {
  17   3                        if(step3) //如果步骤三已经完成
  18   3                          {
  19   4                            //模式一已经完成 ，蜂鸣器开始叫
  20   4                      //      mode=0;//初始化模式
  21   4                            step1=0;
  22   4                            step2=0;
  23   4                            step3=0;
  24   4      
  25   4                          }
  26   3                        else//如果步骤三没有完成
  27   3                          {
  28   4                            stopMotor();
*** WARNING C206 IN LINE 28 OF ..\SOFTWARE\TASK\MODE.C: 'stopMotor': missing function-prototype
  29   4                            step3=OK;
  30   4                            PrintString1("step3 is ok\n");
  31   4      
  32   4                          }
  33   3      
  34   3                      }
  35   2                    else //如果步骤二没有完成
  36   2                      {
  37   3                        setTimeout(Timer1,5000); //设置定时器定时长度 ,5秒
  38   3                        //////////////////////定时器////////////////////////////////////////
  39   3                        if(isExpiredTimer(Timer1))   //如果达到定时时间
  40   3                          {
  41   4      
  42   4                            setMotorSpeed(LEFT_MOTOR,0.01f);
*** WARNING C206 IN LINE 42 OF ..\SOFTWARE\TASK\MODE.C: 'setMotorSpeed': missing function-prototype
*** ERROR C267 IN LINE 42 OF ..\SOFTWARE\TASK\MODE.C: 'setMotorSpeed': requires ANSI-style prototype
  43   4                            setMotorSpeed(RIGHT_MOTOR,0.99f);
  44   4                            stopMotor();
  45   4                            step2=OK;
  46   4                            PrintString1("step2 is ok\n");
  47   4                          }
  48   3                        else//如果未达到定时时间或定时器未启动
  49   3                          {
  50   4      
  51   4                            if(isStopped(Timer1)) //只有当定时器是停止状态时才启动定时器。
C51 COMPILER V8.05a   MODE                                                                 07/18/2017 16:00:21 PAGE 2   

  52   4                              {
  53   5                                restartTimer(Timer1);
  54   5      
  55   5                              }
  56   4                          }
  57   3                        ////////////////////////////////////////////////////////////////
  58   3      
  59   3                      }
  60   2                  }
  61   1                else //如果步骤一没有完成
  62   1                  {
  63   2                    setPID_data(SET_ANGLE,100); //设定稳定角度
  64   2                    setTimeout(Timer1,5000); //设置定时器定时长度 ,3秒
  65   2                    startMotor();//电机开始工作
  66   2                    if(abs(getPID_data(ERR))<2.0f)//当误差小于2°时，认为达到稳定,定时器就开始计时
  67   2                      {
  68   3                        //////////////////////定时器////////////////////////////////////////
  69   3                        if(isExpiredTimer(Timer1))   //如果达到定时时间
  70   3                          {
  71   4                            stopTimer(Timer1);//达到定时时间后关闭定时器
  72   4                            step1=OK; //步骤一完成 ，已经达到稳定状态，蜂鸣器响一下
  73   4                            PrintString1("step1 is ok\n");
  74   4                          }
  75   3                        else//如果未达到定时时间或定时器未启动
  76   3                          {
  77   4      
  78   4                            if(isStopped(Timer1)) //只有当定时器是停止状态时才启动定时器。
  79   4                              {
  80   5                                restartTimer(Timer1);
  81   5      
  82   5                              }
  83   4                          }
  84   3                        ////////////////////////////////////////////////////////////////
  85   3                      }
  86   2                  }
  87   1      
  88   1      }
  89          
  90          void mode2(void)
  91          {
  92   1        
  93   1      }
  94          
  95          
  96          void mode3(void)
  97          {
  98   1        
  99   1      }
 100          
 101          void mode4(void)
 102          {
 103   1        
 104   1      }
 105          void modeLauncher(void)
 106          {
 107   1        
 108   1      }

C51 COMPILATION COMPLETE.  2 WARNING(S),  1 ERROR(S)
